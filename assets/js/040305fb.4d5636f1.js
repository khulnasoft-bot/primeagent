"use strict";(self.webpackChunkprimeagent_docs=self.webpackChunkprimeagent_docs||[]).push([[3345],{11470:(e,n,t)=>{t.d(n,{A:()=>v});var r=t(96540),s=t(18215),i=t(23104),a=t(56347),o=t(205),l=t(57485),c=t(31682),d=t(70679);function h(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function u(e){const{values:n,children:t}=e;return(0,r.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r}))}(t);return function(e){const n=(0,c.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const t=(0,a.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(s),(0,r.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(t.location.search);n.set(s,e),t.replace({...t.location,search:n.toString()})},[s,t])]}function g(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,i=u(e),[a,l]=(0,r.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:i})),[c,h]=m({queryString:t,groupId:s}),[g,x]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,s]=(0,d.Dv)(n);return[t,(0,r.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),y=(()=>{const e=c??g;return p({value:e,tabValues:i})?e:null})();(0,o.A)(()=>{y&&l(y)},[y]);return{selectedValue:a,selectValue:(0,r.useCallback)(e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),h(e),x(e)},[h,x,i]),tabValues:i}}var x=t(92303);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=t(74848);function j({className:e,block:n,selectedValue:t,selectValue:r,tabValues:a}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,i.a_)(),c=e=>{const n=e.currentTarget,s=o.indexOf(n),i=a[s].value;i!==t&&(l(n),r(i))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:a.map(({value:e,label:n,attributes:r})=>(0,f.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:c,...r,className:(0,s.A)("tabs__item",y.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function P({lazy:e,children:n,selectedValue:t}){const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=i.find(e=>e.props.value===t);return e?(0,r.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:i.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function E(e){const n=g(e);return(0,f.jsxs)("div",{className:(0,s.A)("tabs-container",y.tabList),children:[(0,f.jsx)(j,{...n,...e}),(0,f.jsx)(P,{...n,...e})]})}function v(e){const n=(0,x.A)();return(0,f.jsx)(E,{...e,children:h(e.children)},String(n))}},19365:(e,n,t)=>{t.d(n,{A:()=>a});t(96540);var r=t(18215);const s={tabItem:"tabItem_Ymn6"};var i=t(74848);function a({children:e,hidden:n,className:t}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(s.tabItem,t),hidden:n,children:e})}},41658:(e,n,t)=>{t.r(n),t.d(n,{CH:()=>p,assets:()=>u,chCodeConfig:()=>m,contentTitle:()=>h,default:()=>y,frontMatter:()=>d,metadata:()=>r,toc:()=>g});const r=JSON.parse('{"id":"Develop/api-keys-and-authentication","title":"API keys and authentication","description":"Never expose Primeagent ports directly to the internet without proper security measures.","source":"@site/docs/Develop/api-keys-and-authentication.mdx","sourceDirName":"Develop","slug":"/api-keys-and-authentication","permalink":"/api-keys-and-authentication","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"API keys and authentication","slug":"/api-keys-and-authentication"},"sidebar":"docs","previous":{"title":"Connect an Astra DB MCP server to Primeagent","permalink":"/mcp-component-astra"},"next":{"title":"Install custom dependencies","permalink":"/install-custom-dependencies"}}');var s=t(74848),i=t(28453),a=t(24754),o=t(11470),l=t(19365),c=t(40619);const d={title:"API keys and authentication",slug:"/api-keys-and-authentication"},h=void 0,u={},p={annotations:a.hk,Code:a.Cy},m={staticMediaQuery:"not screen, (max-width: 768px)",lineNumbers:!0,showCopyButton:!0,themeName:"github-dark"},g=[{value:"Primeagent API keys",id:"primeagent-api-keys",level:2},{value:"Primeagent API key permissions",id:"primeagent-api-key-permissions",level:3},{value:"Create a Primeagent API key",id:"create-a-primeagent-api-key",level:3},{value:"Use a Primeagent API key",id:"use-a-primeagent-api-key",level:3},{value:"Track API key usage",id:"track-api-key-usage",level:3},{value:"Revoke an API key",id:"revoke-an-api-key",level:3},{value:"Component API keys",id:"component-api-keys",level:2},{value:"Authentication environment variables",id:"authentication-environment-variables",level:2},{value:"PRIMEAGENT_AUTO_LOGIN",id:"primeagent-auto-login",level:3},{value:"Default authentication enforcement and PRIMEAGENT_SKIP_AUTH_AUTO_LOGIN",id:"primeagent-skip-auth-auto-login",level:4},{value:"PRIMEAGENT_ENABLE_SUPERUSER_CLI",id:"primeagent-enable-superuser-cli",level:3},{value:"PRIMEAGENT_SUPERUSER and PRIMEAGENT_SUPERUSER_PASSWORD",id:"primeagent-superuser",level:3},{value:"PRIMEAGENT_SECRET_KEY",id:"primeagent-secret-key",level:3},{value:"PRIMEAGENT_NEW_USER_IS_ACTIVE",id:"primeagent-new-user-is-active",level:3},{value:"PRIMEAGENT_CORS_*",id:"cors-configuration-for-authentication",level:3},{value:"Start a Primeagent server with authentication enabled",id:"start-a-primeagent-server-with-authentication-enabled",level:2},{value:"Start the Primeagent server",id:"start-the-primeagent-server",level:3},{value:"Manage users as an administrator",id:"manage-users-as-an-administrator",level:3},{value:"See also",id:"see-also",level:2}];function x(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Details:t}=n;return p||f("CH",!1),p.Code||f("CH.Code",!0),t||f("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:'[data-ch-theme="github-dark"] {  --ch-t-colorScheme: dark;--ch-t-foreground: #c9d1d9;--ch-t-background: #0d1117;--ch-t-lighter-inlineBackground: #0d1117e6;--ch-t-editor-background: #0d1117;--ch-t-editor-foreground: #c9d1d9;--ch-t-editor-lineHighlightBackground: #6e76811a;--ch-t-editor-rangeHighlightBackground: #ffffff0b;--ch-t-editor-infoForeground: #3794FF;--ch-t-editor-selectionBackground: #264F78;--ch-t-focusBorder: #1f6feb;--ch-t-tab-activeBackground: #0d1117;--ch-t-tab-activeForeground: #c9d1d9;--ch-t-tab-inactiveBackground: #010409;--ch-t-tab-inactiveForeground: #8b949e;--ch-t-tab-border: #30363d;--ch-t-tab-activeBorder: #0d1117;--ch-t-editorGroup-border: #30363d;--ch-t-editorGroupHeader-tabsBackground: #010409;--ch-t-editorLineNumber-foreground: #6e7681;--ch-t-input-background: #0d1117;--ch-t-input-foreground: #c9d1d9;--ch-t-input-border: #30363d;--ch-t-icon-foreground: #8b949e;--ch-t-sideBar-background: #010409;--ch-t-sideBar-foreground: #c9d1d9;--ch-t-sideBar-border: #30363d;--ch-t-list-activeSelectionBackground: #6e768166;--ch-t-list-activeSelectionForeground: #c9d1d9;--ch-t-list-hoverBackground: #6e76811a;--ch-t-list-hoverForeground: #c9d1d9; }'}}),"\n","\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["Never expose Primeagent ports directly to the internet without proper security measures.\nSet ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_AUTO_LOGIN=False"}),", use a non-default ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SECRET_KEY"}),", and deploy your Primeagent server behind a reverse proxy with authentication enabled.\nFor more information, see ",(0,s.jsx)(n.a,{href:"#start-a-primeagent-server-with-authentication-enabled",children:"Start a Primeagent server with authentication enabled"}),"."]})}),"\n",(0,s.jsx)(n.p,{children:"Authentication credentials help prevent unauthorized access to your Primeagent server, flows, and services connected through components."}),"\n",(0,s.jsx)(n.p,{children:"There are three types of credentials that you use in Primeagent:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#primeagent-api-keys",children:"Primeagent API keys"}),": For authentication with the Primeagent API and authorizing server-side Primeagent actions like running flows and uploading files."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#component-api-keys",children:"Component API keys"}),": For authentication between Primeagent and a service connected through a component, such as a model provider or third-party API."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#authentication-environment-variables",children:"Authentication environment variables"}),": These environment variables configure how Primeagent handles user authentication and authorization."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"primeagent-api-keys",children:"Primeagent API keys"}),"\n",(0,s.jsx)(n.p,{children:"You can use Primeagent API keys to interact with Primeagent programmatically."}),"\n",(0,s.jsxs)(n.p,{children:["By default, most Primeagent API endpoints, such as ",(0,s.jsx)(n.code,{children:"/v1/run/$FLOW_ID"}),", require authentication with a Primeagent API key."]}),"\n",(0,s.jsxs)(n.p,{children:["To configure authentication for Primeagent MCP servers, see ",(0,s.jsx)(n.a,{href:"/mcp-server",children:"Use Primeagent as an MCP server"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"primeagent-api-key-permissions",children:"Primeagent API key permissions"}),"\n",(0,s.jsx)(n.p,{children:"A Primeagent API key adopts the privileges of the user who created it.\nThis means that API keys you create have the same permissions and access that you do, including access to your flows, components, and Primeagent database.\nA Primeagent API key cannot be used to access resources outside of your own Primeagent server."}),"\n",(0,s.jsx)(n.p,{children:"In single-user environments, you are always a superuser, and your Primeagent API keys always have superuser privileges."}),"\n",(0,s.jsxs)(n.p,{children:["In multi-user environments, users who aren't superusers cannot use their API keys to access other users' resources.\nYou must ",(0,s.jsx)(n.a,{href:"#start-a-primeagent-server-with-authentication-enabled",children:"start your Primeagent server with authentication enabled"})," to allow user management and creation of non-superuser accounts."]}),"\n",(0,s.jsx)(n.h3,{id:"create-a-primeagent-api-key",children:"Create a Primeagent API key"}),"\n",(0,s.jsxs)(n.p,{children:["You can generate a Primeagent API key in your Primeagent ",(0,s.jsx)(n.strong,{children:"Settings"})," or with the Primeagent CLI."]}),"\n",(0,s.jsxs)(n.p,{children:["The CLI option is required if your Primeagent server is running in ",(0,s.jsx)(n.code,{children:"--backend-only"})," mode."]}),"\n",(0,s.jsxs)(o.A,{children:[(0,s.jsx)(l.A,{value:"settings",label:"Primeagent Settings",default:!0,children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In the Primeagent header, click your profile icon, and then select ",(0,s.jsx)(n.strong,{children:"Settings"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Primeagent API Keys"}),", and then click ",(0,s.jsx)(n.strong,{children:"Add New"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Name your key, and then click ",(0,s.jsx)(n.strong,{children:"Create API Key"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Copy the API key and store it securely."}),"\n"]})}),(0,s.jsxs)(l.A,{value:"Primeagent CLI",label:"Primeagent CLI",children:[(0,s.jsxs)(n.p,{children:["If you're serving your flow with ",(0,s.jsx)(n.code,{children:"--backend-only=true"}),", you can't create API keys in your Primeagent ",(0,s.jsx)(n.strong,{children:"Settings"})," because the frontend isn't running.\nIn this case, you must create API keys with the Primeagent CLI."]}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Recommended: ",(0,s.jsx)(n.a,{href:"#start-a-primeagent-server-with-authentication-enabled",children:"Start your Primeagent server with authentication enabled"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The Primeagent team recommends enabling authentication for security reasons to prevent unauthorized creation of API keys and superusers, especially in production environments.\nIf authentication isn't enabled (",(0,s.jsx)(n.code,{children:"PRIMEAGENT_AUTO_LOGIN=True"}),"), all users are effectively superusers, and they can create API keys with the Primeagent CLI."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Create an API key with ",(0,s.jsx)(n.a,{href:"/configuration-cli#primeagent-api-key",children:(0,s.jsx)(n.code,{children:"primeagent api-key"})}),":"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"uv ",props:{style:{color:"#FFA657"}}},{content:"run primeagent api-key",props:{style:{color:"#A5D6FF"}}}]}],lang:"shell"},annotations:[]}]}),"\n",(0,s.jsx)(n.p,{children:"All API keys created with the Primeagent CLI have superuser privileges because the command requires superuser authentication, and Primeagent API keys adopt the privileges of the user who created them."}),"\n"]}),"\n"]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"use-a-primeagent-api-key",children:"Use a Primeagent API key"}),"\n",(0,s.jsxs)(n.p,{children:["To authenticate Primeagent API requests, pass your Primeagent API key an ",(0,s.jsx)(n.code,{children:"x-api-key"})," header or query parameter."]}),"\n",(0,s.jsxs)(o.A,{children:[(0,s.jsx)(l.A,{value:"header",label:"HTTP header",default:!0,children:(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"curl ",props:{style:{color:"#FFA657"}}},{content:"-X ",props:{style:{color:"#79C0FF"}}},{content:"POST ",props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:'  "http://',props:{style:{color:"#A5D6FF"}}},{content:"$PRIMEAGENT_SERVER_ADDRESS",props:{style:{color:"#C9D1D9"}}},{content:"/api/v1/run/",props:{style:{color:"#A5D6FF"}}},{content:"$FLOW_ID",props:{style:{color:"#C9D1D9"}}},{content:'?stream=false" ',props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"  -H ",props:{style:{color:"#79C0FF"}}},{content:'"Content-Type: application/json" ',props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"  -H ",props:{style:{color:"#79C0FF"}}},{content:'"x-api-key: ',props:{style:{color:"#A5D6FF"}}},{content:"$PRIMEAGENT_API_KEY",props:{style:{color:"#C9D1D9"}}},{content:'" ',props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"  -d ",props:{style:{color:"#79C0FF"}}},{content:'\'{"inputs": {"text":""}, "tweaks": {}}\'',props:{style:{color:"#A5D6FF"}}}]}],lang:"shell"},annotations:[]}]})}),(0,s.jsx)(l.A,{value:"parameter",label:"Query parameter",children:(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"curl ",props:{style:{color:"#FFA657"}}},{content:"-X ",props:{style:{color:"#79C0FF"}}},{content:"POST ",props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:'  "http://',props:{style:{color:"#A5D6FF"}}},{content:"$PRIMEAGENT_SERVER_ADDRESS",props:{style:{color:"#C9D1D9"}}},{content:"/api/v1/run/",props:{style:{color:"#A5D6FF"}}},{content:"$FLOW_ID",props:{style:{color:"#C9D1D9"}}},{content:"?x-api-key=",props:{style:{color:"#A5D6FF"}}},{content:"$PRIMEAGENT_API_KEY",props:{style:{color:"#C9D1D9"}}},{content:'" ',props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"  -H ",props:{style:{color:"#79C0FF"}}},{content:'"Content-Type: application/json" ',props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"  -d ",props:{style:{color:"#79C0FF"}}},{content:'\'{"inputs": {"text":""}, "tweaks": {}}\'',props:{style:{color:"#A5D6FF"}}}]}],lang:"shell"},annotations:[]}]})})]}),"\n",(0,s.jsxs)(n.p,{children:["For more information about forming Primeagent API requests, see ",(0,s.jsx)(n.a,{href:"/api-reference-api-examples",children:"Get started with the Primeagent API"})," and ",(0,s.jsx)(n.a,{href:"/concepts-publish",children:"Trigger flows with the Primeagent API"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"track-api-key-usage",children:"Track API key usage"}),"\n",(0,s.jsxs)(n.p,{children:["By default, Primeagent tracks API key usage through ",(0,s.jsx)(n.code,{children:"total_uses"})," and ",(0,s.jsx)(n.code,{children:"last_used_at"})," records in your ",(0,s.jsx)(n.a,{href:"/memory",children:"Primeagent database"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["To disable API key tracking, set ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_DISABLE_TRACK_APIKEY_USAGE=True"})," in your ",(0,s.jsx)(n.a,{href:"/environment-variables",children:"Primeagent environment variables"}),".\nThis can help avoid database contention during periods of high concurrency."]}),"\n",(0,s.jsx)(n.h3,{id:"revoke-an-api-key",children:"Revoke an API key"}),"\n",(0,s.jsx)(n.p,{children:"To revoke and delete an API key, do the following:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In the Primeagent header, click your profile icon, and then select ",(0,s.jsx)(n.strong,{children:"Settings"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Primeagent API Keys"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Select the keys you want to delete, and then click ",(0,s.jsx)(c.A,{name:"Trash2","aria-hidden":"true"})," ",(0,s.jsx)(n.strong,{children:"Delete"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This action immediately invalidates the key and prevents it from being used again."}),"\n",(0,s.jsx)(n.h2,{id:"component-api-keys",children:"Component API keys"}),"\n",(0,s.jsx)(n.p,{children:"Component API keys authorize access to external services that are called by components in your flows, such as model providers, databases, or third-party APIs.\nThese aren't Primeagent API keys or general application credentials."}),"\n",(0,s.jsxs)(n.p,{children:["In Primeagent, you can store component API keys in global variables in your ",(0,s.jsx)(n.strong,{children:"Settings"})," or import them from your runtime environment.\nFor more information, see ",(0,s.jsx)(n.a,{href:"/configuration-global-variables",children:"Global variables"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"You create and manage component API keys within the service provider's platform.\nPrimeagent only stores the encrypted key value or a secure reference to a key stored elsewhere; it doesn't manage the actual credentials at the source.\nThis means that deleting a global variable from Primeagent doesn't delete or invalidate the actual API key in the service provider's system.\nYou must delete or rotate component API keys directly using the service provider's interface or API."}),"\n",(0,s.jsxs)(n.p,{children:["For added security, you can set ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_REMOVE_API_KEYS=True"})," to omit API keys and tokens from flow data in your ",(0,s.jsx)(n.a,{href:"/memory",children:"Primeagent database"}),".\nAdditionally, when ",(0,s.jsx)(n.a,{href:"/concepts-flows-import",children:"exporting flows"}),", you can choose to omit API keys from the exported flow JSON."]}),"\n",(0,s.jsx)(n.h2,{id:"authentication-environment-variables",children:"Authentication environment variables"}),"\n",(0,s.jsx)(n.p,{children:"This section describes the available authentication configuration variables."}),"\n",(0,s.jsxs)(n.p,{children:["You can use the ",(0,s.jsx)(n.a,{href:"https://github.com/khulnasoft/primeagent/blob/main/.env.example",children:(0,s.jsx)(n.code,{children:".env.example"})})," file in the Primeagent repository as a template for your own ",(0,s.jsx)(n.code,{children:".env"})," file."]}),"\n",(0,s.jsx)(n.h3,{id:"primeagent-auto-login",children:"PRIMEAGENT_AUTO_LOGIN"}),"\n",(0,s.jsx)(n.p,{children:"This variable controls whether authentication is required to access your Primeagent server, including the visual editor, API, and Primeagent CLI:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_AUTO_LOGIN=False"}),", automatic login is disabled. Users must sign in to the visual editor, authenticate as a superuser to run certain Primeagent CLI commands, and use a Primeagent API key for Primeagent API requests.\nIf ",(0,s.jsx)(n.code,{children:"false"}),", the Primeagent team recommends that you also explicitly set ",(0,s.jsxs)(n.a,{href:"#primeagent-superuser",children:[(0,s.jsx)(n.code,{children:"PRIMEAGENT_SUPERUSER"})," and ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SUPERUSER_PASSWORD"})]})," to avoid using the insecure default values."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_AUTO_LOGIN=True"})," (default), all API requests require authentication with a Primeagent API key, but the visual editor automatically signs in all users as superusers, and Primeagent uses ",(0,s.jsx)(n.em,{children:"only"})," the default ",(0,s.jsx)(n.a,{href:"/api-keys-and-authentication#primeagent-superuser",children:"superuser credentials"}),".\nAll users access the same visual editor environment without password protection, they can run all Primeagent CLI commands as superusers, and Primeagent automatically authenticates internal requests between the backend and frontend based on the users' superuser privileges.\nIf you also want to bypass authentication for Primeagent API requests in addition to other bypassed authentication, see ",(0,s.jsx)(n.a,{href:"/api-keys-and-authentication#primeagent-skip-auth-auto-login",children:(0,s.jsx)(n.code,{children:"PRIMEAGENT_SKIP_AUTH_AUTO_LOGIN"})}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Primeagent doesn't allow users to simultaneously edit the same flow in real time.\nIf two users edit the same flow, Primeagent saves only the work of the most recent editor based on the state of that user's ",(0,s.jsx)(n.a,{href:"/concepts-overview#workspace",children:"workspace"}),". Any changes made by the other user in the interim are overwritten."]}),"\n",(0,s.jsx)(n.h4,{id:"primeagent-skip-auth-auto-login",children:"Default authentication enforcement and PRIMEAGENT_SKIP_AUTH_AUTO_LOGIN"}),"\n",(0,s.jsxs)(n.p,{children:["In Primeagent version 1.6, the default settings are ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_AUTO_LOGIN=True"})," and ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SKIP_AUTH_AUTO_LOGIN=False"}),".\nThis enforces authentication for API requests only, as explained in the preceding section."]}),"\n",(0,s.jsxs)(n.p,{children:["For temporary backwards compatibility, you can revert to the fully unauthenticated behavior from earlier versions by setting both variables to ",(0,s.jsx)(n.code,{children:"true"}),".\nHowever, a future release will set ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_AUTO_LOGIN=False"})," and remove ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SKIP_AUTH_AUTO_LOGIN"}),".\nAt that point, Primeagent will strictly enforce API key authentication for API requests, and you can manually disable authentication for some features, like the visual editor, by setting ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_AUTO_LOGIN=True"}),"."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Authentication enforcement in earlier versions"}),(0,s.jsxs)(n.p,{children:["Primeagent version 1.5 was the first version that could enforce authentication for Primeagent API requests, regardless of the value of ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_AUTO_LOGIN"}),".\nAs a temporary bypass for backwards compatibility, this version added the ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SKIP_AUTH_AUTO_LOGIN"})," environment variable and set both variables to ",(0,s.jsx)(n.code,{children:"true"})," by default to preserve the fully unauthenticated behavior from earlier versions.\nThis allowed users to upgrade to version 1.5 with no change in the authentication behavior."]}),(0,s.jsxs)(n.p,{children:["In Primeagent versions earlier than 1.5, Primeagent API requests didn't require authentication.\nAdditionally, the default setting of ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_AUTO_LOGIN=True"})," automatically granted all users superuser privileges in the visual editor, and it allowed all users to run all Primeagent CLI commands as superusers."]})]}),"\n",(0,s.jsx)(n.h3,{id:"primeagent-enable-superuser-cli",children:"PRIMEAGENT_ENABLE_SUPERUSER_CLI"}),"\n",(0,s.jsxs)(n.p,{children:["Controls the availability of the ",(0,s.jsx)(n.code,{children:"primeagent superuser"})," command in the Primeagent CLI.\nThe default is ",(0,s.jsx)(n.code,{children:"true"}),", but ",(0,s.jsx)(n.code,{children:"false"})," is recommended to prevent unrestricted superuser creation.\nFor more information, see ",(0,s.jsx)(n.a,{href:"/configuration-cli#primeagent-superuser",children:(0,s.jsx)(n.code,{children:"primeagent superuser"})}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"primeagent-superuser",children:"PRIMEAGENT_SUPERUSER and PRIMEAGENT_SUPERUSER_PASSWORD"}),"\n",(0,s.jsx)(n.p,{children:"These variables specify the username and password for the Primeagent server's superuser."}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"PRIMEAGENT_SUPERUSER=administrator",props:{}}]},{tokens:[{content:"PRIMEAGENT_SUPERUSER_PASSWORD=securepassword",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,s.jsxs)(n.p,{children:["They are required if ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_AUTO_LOGIN=False"}),".\nOtherwise, they aren't relevant."]}),"\n",(0,s.jsxs)(n.p,{children:["When you ",(0,s.jsx)(n.a,{href:"#start-a-primeagent-server-with-authentication-enabled",children:"start a Primeagent server with authentication enabled"}),", if these variables are required but ",(0,s.jsx)(n.em,{children:"not"})," set, then Primeagent uses the default values of ",(0,s.jsx)(n.code,{children:"primeagent"})," and ",(0,s.jsx)(n.code,{children:"primeagent"}),".\nThese defaults don't apply when using the Primeagent CLI command ",(0,s.jsx)(n.a,{href:"/configuration-cli#primeagent-superuser",children:(0,s.jsx)(n.code,{children:"primeagent superuser"})}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"primeagent-secret-key",children:"PRIMEAGENT_SECRET_KEY"}),"\n",(0,s.jsxs)(n.p,{children:["This environment variable stores a secret key used for encrypting sensitive data like API keys.\nPrimeagent uses the ",(0,s.jsx)(n.a,{href:"https://pypi.org/project/cryptography/",children:"Fernet"})," library for secret key encryption."]}),"\n",(0,s.jsx)(n.p,{children:"If no secret key is provided, Primeagent automatically generates one."}),"\n",(0,s.jsx)(n.p,{children:"However, you should generate and explicitly set your own key in production environments.\nThis is particularly important for multi-instance deployments like Kubernetes to ensure consistent encryption across instances."}),"\n",(0,s.jsxs)(n.p,{children:["To generate a secret encryption key for ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SECRET_KEY"}),", do the following:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Run the command to generate and copy a secret to the clipboard."}),"\n",(0,s.jsxs)(o.A,{children:[(0,s.jsx)(l.A,{value:"unix",label:"macOS or Linux",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"macOS"}),": Generate a secret key and copy it to the clipboard:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"python3 ",props:{style:{color:"#FFA657"}}},{content:"-c ",props:{style:{color:"#79C0FF"}}},{content:"\"from secrets import token_urlsafe; print(f'PRIMEAGENT_SECRET_KEY={token_urlsafe(32)}')\" ",props:{style:{color:"#A5D6FF"}}},{content:"| ",props:{style:{color:"#FF7B72"}}},{content:"pbcopy",props:{style:{color:"#FFA657"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Linux"}),": Generate a secret key and copy it to the clipboard:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"python3 ",props:{style:{color:"#FFA657"}}},{content:"-c ",props:{style:{color:"#79C0FF"}}},{content:"\"from secrets import token_urlsafe; print(f'PRIMEAGENT_SECRET_KEY={token_urlsafe(32)}')\" ",props:{style:{color:"#A5D6FF"}}},{content:"| ",props:{style:{color:"#FF7B72"}}},{content:"xclip ",props:{style:{color:"#FFA657"}}},{content:"-selection ",props:{style:{color:"#79C0FF"}}},{content:"clipboard",props:{style:{color:"#A5D6FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Unix"}),": Generate a secret key and print it to the terminal to manually copy it:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"python3 ",props:{style:{color:"#FFA657"}}},{content:"-c ",props:{style:{color:"#79C0FF"}}},{content:"\"from secrets import token_urlsafe; print(f'PRIMEAGENT_SECRET_KEY={token_urlsafe(32)}')\"",props:{style:{color:"#A5D6FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n"]})}),(0,s.jsx)(l.A,{value:"windows",label:"Windows",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Generate a secret key and copy it to the clipboard:"}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"python ",props:{style:{color:"#FFA657"}}},{content:"-c ",props:{style:{color:"#79C0FF"}}},{content:"\"from secrets import token_urlsafe; print(f'PRIMEAGENT_SECRET_KEY={token_urlsafe(32)}')\"",props:{style:{color:"#A5D6FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Generate a secret key and print it to the terminal to manually copy it:"}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"# Or just print",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"python ",props:{style:{color:"#FFA657"}}},{content:"-c ",props:{style:{color:"#79C0FF"}}},{content:"\"from secrets import token_urlsafe; print(f'PRIMEAGENT_SECRET_KEY={token_urlsafe(32)}')\"",props:{style:{color:"#A5D6FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n"]})})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Paste the value into your ",(0,s.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"PRIMEAGENT_SECRET_KEY=dBuu...2kM2_fb",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,s.jsxs)(n.p,{children:["If you're running Primeagent on Docker, reference the ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SECRET_KEY"})," from your ",(0,s.jsx)(n.code,{children:".env"})," file in the ",(0,s.jsx)(n.code,{children:"docker-compose.yml"})," file like this:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"environment",props:{style:{color:"#7EE787"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"  - ",props:{style:{color:"#C9D1D9"}}},{content:"PRIMEAGENT_SECRET_KEY=${PRIMEAGENT_SECRET_KEY}",props:{style:{color:"#A5D6FF"}}}]}],lang:"yaml"},annotations:[]}]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"primeagent-new-user-is-active",children:"PRIMEAGENT_NEW_USER_IS_ACTIVE"}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_NEW_USER_IS_ACTIVE=False"})," (default), a superuser must explicitly activate a new user's account before they can sign in to the visual editor.\nThe superuser can also deactivate a user's account as needed."]}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_NEW_USER_IS_ACTIVE=True"}),", new user accounts are automatically activated."]}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"PRIMEAGENT_NEW_USER_IS_ACTIVE=False",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,s.jsxs)(n.p,{children:["Only superusers can manage user accounts for a Primeagent server, but user management only matters if your server has authentication enabled.\nFor more information, see ",(0,s.jsx)(n.a,{href:"#start-a-primeagent-server-with-authentication-enabled",children:"Start a Primeagent server with authentication enabled"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"cors-configuration-for-authentication",children:"PRIMEAGENT_CORS_*"}),"\n",(0,s.jsxs)(n.p,{children:["Cross-Origin Resource Sharing (CORS) configuration controls how authentication credentials are handled when your Primeagent frontend and backend are served from different origins.\nThe following ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_CORS_*"})," environment variables are available:"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Variable"}),(0,s.jsx)(n.th,{children:"Format"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"PRIMEAGENT_CORS_ALLOW_CREDENTIALS"})}),(0,s.jsx)(n.td,{children:"Boolean"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"True"})}),(0,s.jsx)(n.td,{children:"Whether to allow credentials, such as cookies and authorization headers, in CORS requests."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"PRIMEAGENT_CORS_ALLOW_HEADERS"})}),(0,s.jsx)(n.td,{children:"List[String] or String"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"*"})}),(0,s.jsxs)(n.td,{children:["The allowed headers for CORS requests. Provide a comma-separated list of headers or use ",(0,s.jsx)(n.code,{children:"*"})," to allow all headers."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"PRIMEAGENT_CORS_ALLOW_METHODS"})}),(0,s.jsx)(n.td,{children:"List[String] or String"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"*"})}),(0,s.jsxs)(n.td,{children:["The allowed HTTP methods for CORS requests. Provide a comma-separated list of methods or use ",(0,s.jsx)(n.code,{children:"*"})," to allow all methods."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"PRIMEAGENT_CORS_ORIGINS"})}),(0,s.jsx)(n.td,{children:"String"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"*"})}),(0,s.jsxs)(n.td,{children:["The allowed CORS origins. Provide a comma-separated list of origins or use ",(0,s.jsx)(n.code,{children:"*"})," for all origins."]})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["The default configuration enables CORS credentials and uses wildcards (",(0,s.jsx)(n.code,{children:"*"}),") to allow all origins, headers, and methods:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"PRIMEAGENT_CORS_ORIGINS=*",props:{}}]},{tokens:[{content:"PRIMEAGENT_CORS_ALLOW_CREDENTIALS=True",props:{}}]},{tokens:[{content:"PRIMEAGENT_CORS_ALLOW_HEADERS=*",props:{}}]},{tokens:[{content:"PRIMEAGENT_CORS_ALLOW_METHODS=*",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,s.jsxs)(n.admonition,{type:"danger",children:[(0,s.jsx)(n.p,{children:"Primeagent's default CORS settings can be a security risk in production environments because any website can make requests to your Primeagent API, and any website can include credentials in cross-origin requests, including authentication cookies and authorization headers."}),(0,s.jsxs)(n.p,{children:["In production deployments, specify exact origins in ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_CORS_ORIGINS"}),".\nYou can also specify allowed headers and methods, if needed.\nFor example:"]}),(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"PRIMEAGENT_CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com",props:{}}]},{tokens:[{content:"PRIMEAGENT_CORS_ALLOW_CREDENTIALS=True",props:{}}]},{tokens:[{content:"PRIMEAGENT_CORS_ALLOW_HEADERS=Content-Type,Authorization",props:{}}]},{tokens:[{content:"PRIMEAGENT_CORS_ALLOW_METHODS=GET,POST,PUT",props:{}}]}],lang:"text"},annotations:[]}]})]}),"\n",(0,s.jsx)(n.h2,{id:"start-a-primeagent-server-with-authentication-enabled",children:"Start a Primeagent server with authentication enabled"}),"\n",(0,s.jsxs)(n.p,{children:["This section shows you how to use the ",(0,s.jsx)(n.a,{href:"/api-keys-and-authentication#authentication-environment-variables",children:"authentication environment variables"})," to deploy a Primeagent server with authentication enabled.\nThis involves disabling automatic login, setting superuser credentials, generating a secret encryption key, and enabling user management."]}),"\n",(0,s.jsx)(n.p,{children:"This configuration is recommended for any deployment where Primeagent is exposed to a shared or public network, or where multiple users access the same Primeagent server."}),"\n",(0,s.jsxs)(n.p,{children:["With authentication enabled, all users must sign in to the visual editor with valid credentials, and API requests require authentication with a Primeagent API key.\nAdditionally, you must sign in as a superuser to manage users and ",(0,s.jsx)(n.a,{href:"#create-a-primeagent-api-key",children:"create a Primeagent API key"})," with superuser privileges."]}),"\n",(0,s.jsx)(n.h3,{id:"start-the-primeagent-server",children:"Start the Primeagent server"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Create a ",(0,s.jsx)(n.code,{children:".env"})," file with the following variables:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"PRIMEAGENT_AUTO_LOGIN=False",props:{}}]},{tokens:[{content:"PRIMEAGENT_SUPERUSER=",props:{}}]},{tokens:[{content:"PRIMEAGENT_SUPERUSER_PASSWORD=",props:{}}]},{tokens:[{content:"PRIMEAGENT_SECRET_KEY=",props:{}}]},{tokens:[{content:"PRIMEAGENT_NEW_USER_IS_ACTIVE=False",props:{}}]},{tokens:[{content:"PRIMEAGENT_ENABLE_SUPERUSER_CLI=False",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,s.jsxs)(n.p,{children:["Your ",(0,s.jsx)(n.code,{children:".env"})," file can have other environment variables.\nThis example focuses on authentication variables."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Set ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SUPERUSER"})," and ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SUPERUSER_PASSWORD"})," to your desired superuser credentials."]}),"\n",(0,s.jsxs)(n.p,{children:["For a one-time test, you can use basic credentials like ",(0,s.jsx)(n.code,{children:"administrator"})," and ",(0,s.jsx)(n.code,{children:"password"}),".\nStrong, securely-stored credentials are recommended in genuine development and production environments."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Recommended: Generate and set a ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SECRET_KEY"})," for encrypting sensitive data."]}),"\n",(0,s.jsx)(n.p,{children:"If you don't set a secret key, Primeagent generates one automatically, but this isn't recommended for production environments."}),"\n",(0,s.jsxs)(n.p,{children:["For instructions on generating at setting a secret key, see ",(0,s.jsx)(n.a,{href:"#primeagent-secret-key",children:(0,s.jsx)(n.code,{children:"PRIMEAGENT_SECRET_KEY"})}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Save your ",(0,s.jsx)(n.code,{children:".env"})," file with the populated variables. For example:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"PRIMEAGENT_AUTO_LOGIN=False",props:{}}]},{tokens:[{content:"PRIMEAGENT_SUPERUSER=administrator",props:{}}]},{tokens:[{content:"PRIMEAGENT_SUPERUSER_PASSWORD=securepassword",props:{}}]},{tokens:[{content:"PRIMEAGENT_SECRET_KEY=dBuu...2kM2_fb",props:{}}]},{tokens:[{content:"PRIMEAGENT_NEW_USER_IS_ACTIVE=False",props:{}}]},{tokens:[{content:"PRIMEAGENT_ENABLE_SUPERUSER_CLI=False",props:{}}]}],lang:"text"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Start Primeagent with the configuration from your ",(0,s.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"uv run primeagent run --env-file .env",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,s.jsxs)(n.p,{children:["Starting Primeagent with a ",(0,s.jsx)(n.code,{children:".env"})," file automatically authenticates you as the superuser set in ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SUPERUSER"})," and ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SUPERUSER_PASSWORD"}),".\nIf you don't explicitly set these variables, the default values are ",(0,s.jsx)(n.code,{children:"primeagent"})," and ",(0,s.jsx)(n.code,{children:"primeagent"})," for system auto-login."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Verify the server is running. The default location is ",(0,s.jsx)(n.code,{children:"http://localhost:7860"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Next, you can add users to your Primeagent server to collaborate with others on flows."}),"\n",(0,s.jsx)(n.h3,{id:"manage-users-as-an-administrator",children:"Manage users as an administrator"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["To complete your first-time login as a superuser, go to ",(0,s.jsx)(n.code,{children:"http://localhost:7860/login"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["If you aren't using the default location, replace ",(0,s.jsx)(n.code,{children:"localhost:7860"})," with your server's address."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Log in with the superuser credentials you set in your ",(0,s.jsx)(n.code,{children:".env"})," (",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SUPERUSER"})," and ",(0,s.jsx)(n.code,{children:"PRIMEAGENT_SUPERUSER_PASSWORD"}),")."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["To manage users on your server, navigate to ",(0,s.jsx)(n.code,{children:"/admin"}),", such as ",(0,s.jsx)(n.code,{children:"http://localhost:7860/admin"}),", click your profile icon, and then click ",(0,s.jsx)(n.strong,{children:"Admin Page"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"As a superuser, you can add users, set permissions, reset passwords, and delete accounts."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["To add a user, click ",(0,s.jsx)(n.strong,{children:"New User"}),", and then complete the user account form:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Enter a username and password."}),"\n",(0,s.jsxs)(n.li,{children:["To activate the account immediately, select ",(0,s.jsx)(n.strong,{children:"Active"}),". Inactive users cannot sign in or access flows they created before becoming inactive."]}),"\n",(0,s.jsxs)(n.li,{children:["Deselect ",(0,s.jsx)(n.strong,{children:"Superuser"})," if you don't want the user to have full administrative privileges."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Save"}),". The new user appears in the ",(0,s.jsx)(n.strong,{children:"Admin Page"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"To test the new user's access, sign out of Primeagent, and then sign in with the new user's credentials."}),"\n",(0,s.jsxs)(n.p,{children:["Try to access the ",(0,s.jsx)(n.code,{children:"/admin"})," page.\nYou are redirected to the ",(0,s.jsx)(n.code,{children:"/flows"})," page if the new user isn't a superuser."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"see-also",children:"See also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/environment-variables",children:"Primeagent environment variables"})}),"\n"]})]})}function y(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}function f(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);